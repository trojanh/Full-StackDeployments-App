(this["webpackJsonpreact-redux-hooks"]=this["webpackJsonpreact-redux-hooks"]||[]).push([[0],{20:function(e,t,n){},27:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(10),o=n.n(a),s=(n(20),n(7)),i=n(15),r=n(3),l=n(4),d={deploymentList:[]},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"INIT_DEPLOYMENT":return console.log(t),Object(l.a)(Object(l.a)({},e),{},{deploymentList:Object(r.a)(t.payload)});case"ADD_DEPLOYMENT":return Object(l.a)(Object(l.a)({},e),{},{deploymentList:[].concat(Object(r.a)(e.deploymentList),[t.payload])});case"REMOVE_DEPLOYMENT":return Object(l.a)(Object(l.a)({},e),{},{deploymentList:t.payload});default:return e}},u=n(5),b=n(14),O=n(1),m=[{name:"Sporty",deployedAt:"28-05-89",url:"https://www.npoint.io/docs/8f7cf8628b367ffd50a2",versions:["1.0.0","1.1.0","1.2.0","1.2.1","1.3.0","2.0.0"]},{name:"Node",deployedAt:"18-10-2021",url:"https://www.npoint.io/docs/8f7cf8628b367ffd50a2",versions:["1.2.0","1.2.1","1.3.0","2.0.0"]}],h=function(e){var t=e.children;return Object(O.jsx)("span",{className:"new badge red",children:t})},p=function(e){var t,n=e.addNewDeployment,a=Object(c.useState)(m[0]),o=Object(u.a)(a,2),s=o[0],i=(o[1],Object(b.a)()),r=i.register,d=i.handleSubmit,j=i.reset,p=i.formState.errors;return Object(O.jsx)("div",{className:"row",children:Object(O.jsxs)("form",{className:"col s12",onSubmit:d(n),children:[Object(O.jsxs)("div",{className:"row",children:[Object(O.jsxs)("div",{className:"input-field col s12",children:[Object(O.jsxs)("select",Object(l.a)(Object(l.a)({className:"browser-default",id:"template"},r("templateName")),{},{children:[Object(O.jsx)("option",{value:"",disabled:!0,defaultValue:"",children:"Choose your template"}),m.map((function(e,t){return Object(O.jsx)("option",{value:e.name,children:e.name},e+t)}))]})),Object(O.jsx)("label",{className:"active",htmlFor:"template",children:"Template"})]}),Object(O.jsxs)("div",{className:"input-field col s12",children:[Object(O.jsxs)("select",Object(l.a)(Object(l.a)({className:"browser-default",id:"version"},r("version")),{},{children:[Object(O.jsx)("option",{value:"",disabled:!0,defaultValue:"",children:"Choose version"}),s.versions.map((function(e,t){return Object(O.jsx)("option",{value:e,children:e},e+t)}))]})),Object(O.jsx)("label",{className:"active",htmlFor:"template",children:"Version"})]}),Object(O.jsxs)("div",{className:"input-field col s12",children:[Object(O.jsx)("input",Object(l.a)({id:"url",type:"text",className:"validate"},r("url",{required:!0,pattern:/[-a-zA-Z0-9@:%._\\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()@:%_\\+.~#?&//=]*)?/gi}))),Object(O.jsx)("label",{className:"active",htmlFor:"url",children:"Url"}),"pattern"===(null===p||void 0===p||null===(t=p.url)||void 0===t?void 0:t.type)&&Object(O.jsx)(h,{children:"Should be a valid url"})]})]}),Object(O.jsx)("button",{className:"btn col s2 blue",type:"submit",onClick:j,children:"Add New Deployment"})]})})};var v=function(e){return fetch(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_BASE_URL+"/deployments/"+e,{method:"DELETE"}).then((function(e){return e.json()}))},f=function(e){var t=Object(s.c)((function(e){return e.deploymentList})),n=Object(s.b)();return Object(O.jsxs)("tr",{children:[Object(O.jsx)("td",{children:e.item.version}),Object(O.jsx)("td",{children:e.item.templateName}),Object(O.jsx)("td",{children:e.item.url}),Object(O.jsx)("td",{onClick:function(){var c;c=e.item._id,v(c).then((function(e){if(e){var a=t.filter((function(e){return e._id!==c}));n({type:"REMOVE_DEPLOYMENT",payload:a})}}))},className:"secondary-content",children:Object(O.jsx)("i",{className:"remove-btn material-icons blue-text",children:"clear"})})]},e.item._id)};var N=function(e){return fetch(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_BASE_URL+"/deployments",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()}))};var E=function(){return fetch(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).API_BASE_URL+"/deployments").then((function(e){return e.json()}))},_=function(){var e=Object(c.useState)(!1),t=Object(u.a)(e,2),n=(t[0],t[1]),a=Object(s.c)((function(e){return e.deploymentList})),o=Object(s.b)();Object(c.useEffect)((function(){n(!0),E().then((function(e){return e&&o({type:"INIT_DEPLOYMENT",payload:e.data})})),n(!1)}),[o]);return Object(O.jsxs)("div",{className:"row",children:[Object(O.jsx)("h3",{className:"center-align white-text blue",children:"Deployments"}),Object(O.jsx)("div",{className:"row",children:Object(O.jsx)(p,{addNewDeployment:function(e){return N(e).then((function(e){e.data&&(console.log(Object(l.a)({},e.data)),o({type:"ADD_DEPLOYMENT",payload:e.data}))}))}})}),Object(O.jsx)("div",{className:"row",children:a.length>0?Object(O.jsx)("table",{className:"responsive-table",children:Object(O.jsx)("tbody",{className:"collection",children:a.map((function(e){return Object(O.jsx)(f,{item:e},e._id)}))})}):Object(O.jsx)("p",{className:"center-align",children:"You don't have deployments! Please add a new one."})})]})};var x=function(){return Object(O.jsx)("div",{className:"App",children:Object(O.jsx)("main",{className:"container",children:Object(O.jsx)(_,{})})})};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var y=Object(i.a)(j);o.a.render(Object(O.jsx)(s.a,{store:y,children:Object(O.jsx)(x,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[27,1,2]]]);
//# sourceMappingURL=main.e42d28cf.chunk.js.map